/* Starlight + Tailwind v4 cascade layer ordering */
@layer base, starlight, theme, components, utilities;

/* Starlight-Tailwind compatibility layer */
@import '@astrojs/starlight-tailwind';

/* Tailwind v4 theme and utilities */
@import 'tailwindcss/theme.css' layer(theme);
@import 'tailwindcss/utilities.css' layer(utilities);

/* Web fonts — loaded via <link> in BaseHead, defined here for reference */
@theme {
  --font-sans: 'Instrument Sans', 'Inter', system-ui, ui-sans-serif, sans-serif;
  --font-mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', ui-monospace, monospace;
  --font-display: 'Pixelify Sans', 'JetBrains Mono', ui-monospace, monospace;
  --font-pixel: 'Press Start 2P', 'Pixelify Sans', ui-monospace, monospace;

  /* Accent color tokens for Tailwind utilities */
  --color-accent: #4040B0;
  --color-accent-content: #4040B0;
  --color-accent-foreground: #ffffff;
}

/* ============================================================
   Gitty Design System — CSS Custom Properties (Light Mode)
   ============================================================ */
:root {
    /* Surface Colors */
    --surface-0: #E8E5DF;
    --surface-1: #DED9D0;
    --surface-2: #D4CFC6;
    --surface-3: #C8C3B8;

    /* Border Colors */
    --border-default: #C8C3B8;
    --border-subtle: #D8D3C8;
    --border-strong: #B8B3A8;

    /* Text Colors */
    --text-primary: #2C3040;
    --text-secondary: #4A4E5E;
    --text-tertiary: #5E6272;

    /* Accent Colors - IBM Carbon Blue */
    --accent: #4040B0;
    --accent-muted: rgba(64, 64, 176, 0.15);
    --accent-text: #4040B0;

    /* Semantic Colors */
    --color-green: #1E8C0A;
    --color-red: #D91440;
    --color-yellow: #C08800;
    --color-peach: #E05800;
    --color-blue: #4040B0;
    --color-mauve: #7C3AED;
    --color-teal: #0D9488;
    --color-sky: #0EA5E9;
    --color-lavender: #6366F1;

    /* Shadows */
    --shadow-sm: 0 1px 2px rgba(44, 48, 64, 0.08);
    --shadow-md: 0 4px 12px rgba(44, 48, 64, 0.10);

    /* Transitions */
    --transition-fast: 100ms ease;
    --transition-normal: 150ms ease;
    --transition-slow: 250ms ease;

    /* Border Radius */
    --radius-sm: 4px;
    --radius-md: 6px;
    --radius-lg: 8px;

    /* Win95 Bevel System */
    --bevel-highlight: #ffffff;
    --bevel-shadow: #808080;
    --bevel-inner-highlight: #dfdfdf;
    --bevel-inner-shadow: #404040;
}

/* ============================================================
   Dark Mode — Catppuccin Mocha
   ============================================================ */
html[data-theme='dark'] {
    /* Surface Colors */
    --surface-0: #1e1e2e;
    --surface-1: #313244;
    --surface-2: #45475a;
    --surface-3: #585b70;

    /* Border Colors */
    --border-default: #45475a;
    --border-subtle: #313244;
    --border-strong: #585b70;

    /* Text Colors */
    --text-primary: #cdd6f4;
    --text-secondary: #bac2de;
    --text-tertiary: #a6adc8;

    /* Accent Colors */
    --accent: #7c7cf0;
    --accent-muted: rgba(124, 124, 240, 0.15);
    --accent-text: #9595f5;

    /* Semantic Colors */
    --color-green: #a6e3a1;
    --color-red: #f38ba8;
    --color-yellow: #f9e2af;
    --color-peach: #fab387;
    --color-blue: #89b4fa;
    --color-mauve: #cba6f7;
    --color-teal: #94e2d5;
    --color-sky: #89dceb;
    --color-lavender: #b4befe;

    /* Shadows */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.4);

    /* Win95 Bevel System */
    --bevel-highlight: #585b70;
    --bevel-shadow: #11111b;
    --bevel-inner-highlight: #45475a;
    --bevel-inner-shadow: #181825;
}

html[data-theme='dark'] .crt-scanlines::after {
    background: repeating-linear-gradient(
        0deg, rgba(255, 255, 255, 0.03) 0px,
        transparent 1px, transparent 3px,
        rgba(255, 255, 255, 0.03) 4px
    );
}

html[data-theme='dark'] .retro-paper {
    background-image: repeating-linear-gradient(
        0deg, transparent, transparent 24px,
        rgba(100, 105, 130, 0.15) 24px, rgba(100, 105, 130, 0.15) 25px
    );
}

html[data-theme='dark'] .terminal-header {
    background: linear-gradient(90deg, rgba(124, 124, 240, 0.08), transparent 60%);
}

html[data-theme='dark'] .retro-input {
    background: #313244;
}

html[data-theme='dark'] .retro-input:focus {
    border-color: #7c7cf0 #45475a #45475a #7c7cf0;
    box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(124, 124, 240, 0.2);
}

/* ============================================================
   Accessibility — Focus Ring
   ============================================================ */

:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

/* ============================================================
   Retro Utility Classes
   ============================================================ */

/* Win95-style Beveled Buttons */
.btn-bevel {
    border: 2px solid;
    border-color: var(--bevel-highlight) var(--bevel-shadow) var(--bevel-shadow) var(--bevel-highlight);
    box-shadow: inset 1px 1px 0px var(--bevel-inner-highlight), inset -1px -1px 0px var(--bevel-inner-shadow);
    transition: all 0.1s ease;
}
.btn-bevel:active {
    border-color: var(--bevel-shadow) var(--bevel-highlight) var(--bevel-highlight) var(--bevel-shadow);
    box-shadow: inset 1px 1px 0px var(--bevel-inner-shadow), inset -1px -1px 0px var(--bevel-inner-highlight);
}

/* Panel Inset */
.panel-inset {
    border: 2px solid;
    border-color: var(--border-default) var(--bevel-highlight) var(--bevel-highlight) var(--border-default);
    box-shadow: inset 1px 1px 3px rgba(0, 0, 0, 0.06);
}

/* Retro Paper */
.retro-paper {
    background-image: repeating-linear-gradient(
        0deg, transparent, transparent 24px,
        rgba(200, 195, 184, 0.3) 24px, rgba(200, 195, 184, 0.3) 25px
    );
}

/* CRT Scanlines */
.crt-scanlines { position: relative; }
.crt-scanlines::after {
    content: '';
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
        0deg, rgba(255, 255, 255, 0.015) 0px,
        transparent 1px, transparent 3px,
        rgba(255, 255, 255, 0.015) 4px
    );
    pointer-events: none;
    z-index: 98;
}

/* Terminal Block Headers */
.terminal-header {
    position: relative;
    padding-left: 2.5rem;
    background: linear-gradient(90deg, rgba(64, 64, 176, 0.06), transparent 60%);
}
.terminal-header::before {
    content: '>';
    position: absolute;
    left: 0.75rem;
    font-family: var(--font-display);
    color: var(--accent);
    text-shadow: 0 0 4px rgba(64, 64, 176, 0.3);
}

/* Window Chrome Header */
.window-chrome {
    background: linear-gradient(180deg, var(--surface-2) 0%, var(--surface-1) 100%);
    border-bottom: 1px solid var(--border-strong);
    box-shadow: 0 1px 0 rgba(64, 64, 176, 0.08), var(--shadow-sm);
}

/* Retro Input Fields */
.retro-input {
    border: 2px solid;
    border-color: var(--bevel-shadow) var(--bevel-highlight) var(--bevel-highlight) var(--bevel-shadow);
    box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.1);
    caret-color: var(--accent);
    background: var(--surface-0);
}
.retro-input:focus {
    border-color: #4040B0 #a0a0e0 #a0a0e0 #4040B0;
    box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(64, 64, 176, 0.2);
}

/* ============================================================
   Animation Keyframes
   ============================================================ */
@keyframes slideIn {
    from { transform: translateY(10px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}
@keyframes commitFlash {
    0% { background-color: rgba(64, 64, 176, 0.15); }
    100% { background-color: transparent; }
}
