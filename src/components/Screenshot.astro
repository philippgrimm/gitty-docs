---
/**
 * Screenshot â€” CRT monitor bezel frame for screenshots
 *
 * Wraps an image in a retro CRT-style bezel with inset glow.
 * Supports theme-aware image swapping via darkSrc prop.
 */

interface Props {
  src: string;
  darkSrc?: string;
  alt: string;
  caption?: string;
  class?: string;
  width?: number;
  height?: number;
}

const {
  src,
  darkSrc,
  alt,
  caption,
  class: className = '',
  width = 1280,
  height = 800,
} = Astro.props;
---

<figure class:list={['screenshot', className]}>
  <div class="screenshot__bezel">
    {darkSrc ? (
      <>
        <img
          src={src}
          alt={alt}
          width={width}
          height={height}
          loading="lazy"
          decoding="async"
          class="screenshot__img screenshot__img--light"
        />
        <img
          src={darkSrc}
          alt={alt}
          width={width}
          height={height}
          loading="lazy"
          decoding="async"
          class="screenshot__img screenshot__img--dark"
        />
      </>
    ) : (
      <img
        src={src}
        alt={alt}
        width={width}
        height={height}
        loading="lazy"
        decoding="async"
        class="screenshot__img"
      />
    )}
  </div>
  {caption && (
    <figcaption class="screenshot__caption">{caption}</figcaption>
  )}
</figure>

<style>
  .screenshot {
    display: block;
    margin: 0;
  }

  .screenshot__bezel {
    border: 3px solid;
    border-color: #5858b0 #1e1b50 #1e1b50 #5858b0;
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow:
      inset 0 0 40px rgba(75, 80, 176, 0.08),
      inset 0 0 80px rgba(0, 0, 0, 0.1),
      var(--shadow-md);
  }

  .screenshot__img {
    display: block;
    width: 100%;
    height: auto;
  }

  /* Theme-aware image swap */
  .screenshot__img--dark {
    display: none;
  }

  html[data-theme='dark'] .screenshot__img--light {
    display: none;
  }

  html[data-theme='dark'] .screenshot__img--dark {
    display: block;
  }

  html[data-theme='dark'] .screenshot__bezel {
    border-color: #45475a #181825 #181825 #45475a;
  }

  .screenshot__caption {
    display: block;
    margin-top: 0.625rem;
    font-family: var(--font-display);
    font-size: 0.75rem;
    color: var(--text-tertiary);
    text-align: center;
    letter-spacing: 0.03em;
  }
</style>
